# config.yaml - 자동매매 시스템 설정

api:
  base_url: "https://openapi.koreainvestment.com:9443"
  websocket_url: "wss://ops.koreainvestment.com:21000"

system:
  token_refresh_margin_minutes: 5
  approval_margin_seconds: 1800
  state_file: "tmp/auto-sell-order-state.json"
  graceful_shutdown_timeout: 30

trading:
  profit_margin: 0.03        # 목표 수익률 3%
  exchange_code: "NASD"      # 기본 거래소 NASDAQ

telegram:
  # 봇 사용 안 하면 빈 문자열로 설정
  bot_token: ""
  chat_id: ""

rate_limit:
  requests_per_second: 1
  daily_limit: 5000
  hourly_limit: 500
  min_request_interval: 2.5
  consecutive_limit: 10
  cooldown_on_limit: 60

polling:
  # 1) 핫모드: 17:00–17:30, 21:00–22:30 → 3초 폴링
  hot_mode:
    time_ranges:
      - start: "17:00"
        end:   "17:30"
      - start: "21:00"
        end:   "22:30"
    interval: 3

  ws_mode:
    time_ranges:
      - start: "22:30"
        end:   "01:00"

  # 2) 스마트모드: 17:30–21:00 → 60초 기본, 최대 300초, backoff
  smart:
    time_ranges:
      - start: "17:30"
        end:   "21:00"
    initial_interval: 60
    max_interval: 300
    backoff_multiplier: 1.5
    no_change_threshold: 5
    consecutive_success_speedup: false
    order_age_factor:
      - minutes: 30
        interval: 30
      - minutes: 60
        interval: 60
      - default: 60

  # 3) 수면모드: 01:00–17:00 → 중지
  sleep:
    time_ranges:
      - start: "01:00"
        end:   "17:00"
    interval: 0

logging:
  level: "INFO"
