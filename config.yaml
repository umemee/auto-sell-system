# config.yaml - 자동매매 시스템 설정 (미국 동부시간 기준)

api:
  base_url: "https://openapi.koreainvestment.com:9443"
  websocket_url: "ws://ops.koreainvestment.com:21000"
  request_timeout: 15

system:
  token_refresh_margin_minutes: 5
  approval_margin_seconds: 1800
  state_file: "/tmp/auto-sell-order-state.json"
  graceful_shutdown_timeout: 30
  max_reconnect_attempts: 10
  base_reconnect_delay: 5

trading:
  profit_margin: 0.03
  exchange_code: "NASD"
  default_order_type: "00"
  timezone: "US/Eastern"
  default_symbol: "AAPL"

telegram:
  polling_interval: 10
  error_polling_interval: 30
  timeout: 10

rate_limit:
  requests_per_second: 1
  daily_limit: 5000
  hourly_limit: 500
  min_request_interval: 2.5
  consecutive_limit: 10
  cooldown_on_limit: 60
  aggressive_mode_limit: 1000
  smart_mode_limit: 2000

# ✅ 모든 시간을 미국 동부시간(ET) 기준으로 설정
polling:
  # 프리마켓: ET 04:00-09:30 (한국시간 17:00-22:30 또는 18:00-23:30)
  aggressive:
    interval: 3
    time_ranges:
      - {start: "04:00", end: "09:30"}
  
  # 애프터마켓: ET 16:00-20:00 (한국시간 다음날 05:00-09:00 또는 06:00-10:00)
  smart:
    initial_interval: 5
    max_interval: 30
    backoff_multiplier: 1.2
    no_change_threshold: 5
    consecutive_success_speedup: true
    time_ranges:
      - {start: "16:00", end: "20:00"}
    order_age_factor:
      - {minutes: 5, interval: 10}
      - {minutes: 15, interval: 20}
      - {default: 30}
  
  # 정규장: ET 09:30-16:00 (한국시간 22:30-05:00 또는 23:30-06:00)
  ws_mode:
    time_ranges:
      - {start: "09:30", end: "16:00"}

strategy:
  aggressive_strategy:
    target_profit_margin: 0.03
  smart_strategy:
    target_profit_margin: 0.03

logging:
  level: "INFO"